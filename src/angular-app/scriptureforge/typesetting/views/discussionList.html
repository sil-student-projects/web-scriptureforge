<div data-ng-cloak data-ng-controller="discussionListCtrl">
    <h2>Discussions</h2>
    <div>
        <button class="btn btn-success" data-ng-show="isManager()"
            data-ng-click="newThreadCollapsed =! newThreadCollapsed">Create
            New Thread</button>
    </div>
    <div class="new-item" data-collapse="newThreadCollapsed">
        <form class="well" class="form-horizontal" name="newProjectForm">
            <div class="form-group">
                <input data-ng-model="newThread.title" type="text"
                    set-focus="!newThreadCollapsed" maxlength="50" required
                    placeholder="Thread Title" />
                <input
                    data-ng-model="newThread.associatedItem" type="text"
                    set-focus="!newThreadCollapsed" maxlength="50" required
                    placeholder="Item Reference" />
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-default"
                    data-ng-click="newThreadCollapsed = false; createThread()">
                    <i class="icon-ok"></i>Create
                </button>
            </div>
        </form>
    </div>
    <table class="table table-hover tableTopMargin">
        <thead>
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Item</th>
                <th>Status</th>
                <th>Modified</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr data-ng-repeat="thread in discussion.threads">
                <td class="col-md-3"><a
                    data-ui-sref="discussionThreadView({threadId:thread.id})"
                    data-ng-click="discussion.currentThreadIndex = $index">{{thread.title}}</a></td>
                <td class="col-md-2">{{thread.author.name}}</a></td>
                <td class="col-md-2">{{thread.associatedItem}}</td>
                <td class="col-md-1">{{thread.status}}</td>
                <td class="col-md-2">{{thread.dateModified | relativetime}}</td>
                <td class="col-md-1"><button class="btn btn-danger"
                        data-ng-click="deleteThread(thread, $index)">Delete</button></td>
            </tr>
        </tbody>
    </table>
    <div class="paginationblock">
        <ul class="pagination data-ng-isolate-scope" boundary-links="true"
            total-items="discussion.threads.length" data-ng-model="currentPage"
            items-per-page="itemsPerPage" previous-text="�" next-text="�"
            first-text="�" last-text="�">
            <!-- ngIf: boundaryLinks -->
            <!-- ngIf: directionLinks -->
            <!-- ngRepeat: page in pages track by $index -->
            <!-- ngIf: directionLinks -->
            <!-- ngIf: boundaryLinks -->
        </ul>
        <div class="right pagination">
            Items per page: <select data-ng-model="itemsPerPage"
                class="ng-valid data-ng-dirty"><option value="10"
                    selected="">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option></select>
        </div>
    </div>
</div>
