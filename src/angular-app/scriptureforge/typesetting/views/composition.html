<div data-ng-cloak data-ng-controller="compositionCtrl"
    style="text-align: center;">

    <div class="spanWorkspace">
        <div class="row">
            <div class="col-lg-6">
                <button type="button" class="btn btn-primary btn-sm"
                    data-ng-click="lock()">Lock</button>
                <button type="button" class="btn btn-primary btn-sm"
                    data-ng-click="save()">Save</button>
                <button type="button" class="btn btn-primary btn-sm"
                    data-ng-click="renderRapuma()">Render All</button>
                Book of: <select class="form-control books" ng-model="bookID"
                    ng-options="book.id as book.name for book in listOfBooks"
                    data-ng-change="bookChanged()"></select>
                <div class="page-select">
                    page: <input data-ng-keyup="$event.keyCode==13 && updatePage()"
                        class="pageNumber" data-ng-model="pageInput">
                    <button type="button" class="btn btn-primary btn-sm"
                        data-ng-click="updatePage()">GO</button>
                </div><!--End page-select--> 
            </div><!--End Col-lg-6--> 
        </div><!--End Row--> 
        
        <div class="row composition-bottom">
			<div class="span6 text workingText" data-ng-bind-html="bookHTML"
                    data-ng-click="textClick()" composition-selection
                    paragraph-node="paragraphNode" content="bookHTML">
			</div><!--End Working Text--> 
            
            <div class="span12 imageContainer">
				<div class="imageDiv"
                    data-ng-class="{grey:selectedPage%2==1}">
					<img data-ng-src="{{renderedImageLeft || '//:0'}}"
                        data-ng-class="{imageBorder:renderedImageLeft}" />
                </div><!--End left image--> 

                <div class="imageDiv"
                    data-ng-class="{grey:selectedPage%2==0}">
                    <img data-ng-src="{{renderedImageRight || '//:0'}}"
                        data-ng-class="{imageBorder:renderedImageRight}" />
                </div><!--End Right image--> 
                
                <div class="properties">
					<span data-ng-show="currentImage==''&&verse==''"> Properties
                        panel <br /> <br /> Click on a paragraph or an illustration
                        placeholder to edit their properties
					</span>
				</div> 
                
			</div><!--End imageContainer-->  
			
			
            <div class="progressBar" data-ng-show="currentImage!=''">
				<table>
					<tbody>
						<tr>
							<td>Illustration</td>
								<td>{{currentImage}}</td>
						</tr>
                        <tr>
							<td>Location</td>
								<td><input class="form-control" data-ng-model="location"
                                        data-ng-change="illustrationSave()" /></td>
						</tr>
                        <tr>
							<td>Width</td>
							<td><input class="form-control" type="number"
                                        data-ng-model="imageWidth" data-ng-change="illustrationSave()" />
                            </td>
						</tr>
                        <tr>
							<td>Scale</td>
                            <td><input class="form-control" type="number"
                                        data-ng-model="scale" step="0.05"
                                        data-ng-change="illustrationSave()" /></td>
						</tr>
                        <tr>
							<td>Caption</td>
							<td><input class="form-control" data-ng-model="caption"
                                        data-ng-change="illustrationSave()" /></td>
						</tr>l
						<tr>
							<td>Use caption</td>
							<td><input class="checkbox" type="checkbox"
                                        data-ng-model="useCaption" data-ng-change="illustrationSave()" />
							</td>
						</tr>
						<tr>
							<td>Use illustration</td>
                            <td><input class="checkbox" type="checkbox"
                                        data-ng-model="useIllustration"
                                        data-ng-change="illustrationSave()" /></td>
						</tr>
					</tbody>
				</table>
				
                    <div data-ng-show="verse!=''">
                        <p>Chapter: {{chapter}}, verse: {{verse}}</p>
                        Growth factor: <input class="form-control"
                            data-ng-change="paragraphChanged()"
                            style="display: inline-block; width: 50%; margin-bottom: 10px;"
                            type="number" data-ng-model="paragraphGrowthFactor" min="-1"
                            max="2" />
                    </div>
                </div>
            
                <div class="span-6">
                    <div class="prev">
                        <button type="button" class="btn btn-link "
                                data-ng-click="decreasePage()">&laquo</button>
                    </div>
                    <div class="next">
                        <button type="button" class="btn btn-link"
                                data-ng-click="increasePage()">&raquo</button>
                    </div>
                    <div
                            class="progress-bar composition-progress-bar progress-bar-slider"
                            data-ng-class="{invisible:pages.length==0}">
                        <input class="progress-slider" type="range" min="0"
                               max="{{pages.length}}" data-ng-model="selectedPage">
                        <div class="inner"
                             data-ng-style="{ width: (selectedPage)/pages.length*100 + '%' || '0%' }"></div>
                    <span class="sliderRanges"
                          data-ng-repeat="page in pages track by $index"
                          data-ng-style="{width: 100/pages.length + '%', 'background-color':page}"></span>
						</div>
						</div>
					</div><!--End Prev--> 
				</div><!--End span-6--> 
		</div><!--End Row Composition-bottom--> 
